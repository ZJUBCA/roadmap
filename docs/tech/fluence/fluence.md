# å‰è¨€

å‰ä¸€æ®µæ—¶é—´ [Fluence](https://fluence.network/) å¼€å¯é’ˆå¯¹ Github å¼€å‘è€…çš„ç©ºæŠ•æ´»åŠ¨ï¼Œå¯¹ç¬¦åˆè¦æ±‚çš„å¼€å‘è€…ç©ºæŠ• 5000 æš FLTï¼Œæœ€é«˜ä»·æ ¼è¿‘ 8000 ç¾å…ƒï¼ˆ2024.5.15 çº¦ 2400 ç¾å…ƒï¼‰ã€‚ç‰¹åˆ«çš„æ˜¯ï¼Œé¢†å–è¯¥ç©ºæŠ•éœ€è¦ç”¨æˆ·åœ¨æœ¬åœ°è¿è¡Œä¸€æ®µä»£ç ï¼Œå°†æ‰§è¡Œç»“æœå¤åˆ¶åˆ°å®˜ç½‘æ‰èƒ½é¢†å–ï¼Œå¹¶ä¸”é”ä»“ 2 ä¸ªæœˆã€‚ç¬”è€…éå¸¸å¥½å¥‡ï¼Œè¿™ç§é¢†å–æ–¹å¼æ˜¯å¦å­˜åœ¨å®‰å…¨é£é™©ï¼Œå› æ­¤å±•å¼€äº†ä»£ç åˆ†æã€‚

# ç–‘é—®

è¿™æ˜¯ä¸€æ¡é¢†å–çš„äº¤æ˜“è®°å½•ï¼š[ğŸ”—](https://etherscan.io/tx/0x7762bc734a7dba69c4f3744b37ac8215f8c9ae8ce7071de9ed08060ef88409f8)ï¼Œæˆ‘ä»¬çš„é—®é¢˜å¦‚ä¸‹ï¼š

1. å®˜æ–¹æ˜¯æ€ä¹ˆç”¨æ™ºèƒ½åˆçº¦ solidity éªŒè¯ä½ æ˜¯ github ssh key çš„æ‹¥æœ‰è€…çš„ï¼Ÿ

2. æ€ä¹ˆæŸ¥è¯¢é¢†å–è¿›åº¦ï¼Ÿ

3. é¢†å–äº¤æ˜“ä¼šä¸ä¼šæ³„éœ²ä½ çš„evmé¢†å–åœ°å€ä¸githubçš„å…³è”ï¼Ÿ

4. åˆçº¦ä¸­ç”¨åˆ°äº†å“ªäº›çœ gas çš„æ–¹æ¡ˆï¼Ÿ

# å‰ç½®çŸ¥è¯†

1. [ğŸ”—](https://soliditydeveloper.com/merkle-tree)ï¼Œç¿»è¯‘ï¼š[ğŸ”—](https://learnblockchain.cn/article/5297)ï¼šäº†è§£ Merkle.verify ä»¥åŠ bitmap çœ gas çš„æ–¹æ³•
2. `https://github.com/<username>.keys`ï¼šæŸ¥è¯¢åˆ«äººçš„ ssh å…¬é’¥

# é¢†å–é€»è¾‘

é¡¹ç›®æ–¹äº‹å…ˆè·å–åˆ°æ‰€æœ‰å¼€å‘è€…çš„å…¬é’¥å¹¶ç»™ä»–ä»¬åˆ†é…ä¸€ä¸ª user_id å’Œ temp_eth_accountï¼Œç„¶åä½¿ç”¨å¼€å‘è€…çš„å…¬é’¥å¯¹ temp_eth_account çš„ç§é’¥åŠ å¯†æˆ dataã€‚å°†æ‰€æœ‰çš„ temp_eth_account ï¼ˆä»¥åŠ user_idï¼‰ç»„æˆä¸€ä¸ª Merkle Treeï¼Œå°† Merkle Tree Root æ”¾åœ¨åˆçº¦é‡Œã€‚å› æ­¤ç”¨æˆ·è¦æä¾›éªŒè¯

ç”¨æˆ·ç”¨è‡ªå·±çš„ç§é’¥è§£å¯† data å¾—åˆ° temp_eth_account çš„ç§é’¥ï¼ˆä»è€Œå¾—åˆ°è¿™ä¸ª temp_eth_account çš„æ§åˆ¶æƒï¼Œè¿™ä¸ª temp_eth_account çš„åœ°å€æ˜¯æ‰€æœ‰äººéƒ½çŸ¥é“çš„ï¼‰å’Œ user_idï¼Œç„¶åå¾—åˆ°å¯¹åº” Merkle Proofã€‚ç„¶åç”¨ temp_eth_account ç­¾åä¸€æ¡ä¿¡æ¯ï¼šæŠŠé’±å‘ç»™ receiverAddressã€‚æœ€åæŠŠ user_idï¼Œtemp_eth_accountï¼ŒMerkleProof éƒ½å‘åˆ°åˆçº¦ claim å‡½æ•°é‡Œã€‚

åˆçº¦ä¼šæ ¡éªŒ temp_eth_account æ˜¯å¦æ˜¯æœ€åˆé¡¹ç›®æ–¹åˆ†é…çš„ï¼ˆå…¶å®å°±æ˜¯ç”¨ Merkle Proof æ¥è¯æ˜ github_address æ˜¯æœ€åˆé‚£ä¸ª List é‡Œçš„ä¸€ä¸ªï¼Œä½†æ˜¯ä¿å­˜æ‰€æœ‰ github_address å¤ªå ç©ºé—´ï¼Œæ‰€ä»¥åªä¿å­˜äº† Rootï¼‰ç„¶åéªŒè¯ç­¾åæ¥è¯æ˜ç”¨æˆ·æœ‰æ§åˆ¶æƒï¼Œä¸€æ—¦è¯æ˜æœ‰æ§åˆ¶æƒå°±å‘ç©ºæŠ•ã€‚

## å‰ç«¯

ä»“åº“ï¼š[ğŸ”—](https://github.com/fluencelabs/dev-rewards.git)

![](./img/1.png)

1. ask_user_info å°±æ˜¯è®©ç”¨æˆ·è¾“å…¥è‡ªå·±çš„ github åå­—å’Œ receiverAddressï¼Œåˆ¤æ–­ github åæ˜¯å¦åœ¨åˆ—è¡¨ä¸­

2. choose_ssh_key æ˜¯è®©ç”¨æˆ·é€‰æ‹©è‡ªå·±çš„ç§é’¥åœ°å€ï¼ˆä¸ä¼šä¸Šç½‘æ‰€ä»¥ä¸ç”¨æ‹…å¿ƒï¼‰

3. decrypt_temp_eth_account é€šè¿‡ç§é’¥è§£å¯† data å¾—åˆ° temp_eth_account çš„æ§åˆ¶æƒ

4. get_merkle_proof å¾—åˆ° Merkle Proof å’Œ user_id

5. ç”¨ temp_eth_account æ¥ç­¾åï¼šæŠŠé’±å‘ç»™ receiverAddress

6. è·å¾— user_idã€temp_eth_addressã€signã€Merkle Proofã€‚å°†è¿™ä¸²è¾“å‡ºå¤åˆ¶åˆ°å»æ‰§è¡Œåˆçº¦çš„ claimToken å‡½æ•°ã€‚

## åˆçº¦

![](./img/2.png)

1. Merkle.verify éªŒè¯ temp_eth_account æ˜¯å¦æ˜¯é¡¹ç›®æ–¹æœ€å…ˆå‘æ”¾çš„

2. éªŒè¯ç­¾åæ˜¯å¦æ¥è‡ª temp_eth_account

3. å‘é’±

# ç›¸å…³é—®é¢˜

## å¦‚ä½•æŸ¥è¯¢é¢†å–è¿›åº¦ï¼ˆç”šè‡³ä¼šéšæ—¶é—´å‡åŠï¼‰

å½“å‰å·²é¢†å–ï¼š

![](./img/3.png)

æ€»ä¾›åº”ï¼š

![](./img/4.png)

ç”šè‡³ä»£ç é‡Œé¢†å–é‡éšæ—¶é—´æ˜¯ä¸€ç›´å‡åŠçš„ï¼š

![](./img/5.png)

## é¢†å–äº¤æ˜“ä¼šä¸ä¼šæ³„éœ²ä½ çš„evmé¢†å–åœ°å€ä¸githubçš„å…³è”ï¼Ÿ

ä¸ä¼šæ³„éœ²ã€‚æ‰€æœ‰äººåªèƒ½çœ‹åˆ°ï¼š

1. github ç”¨æˆ·çš„å…¬é’¥

2. è¢« github ç”¨æˆ·å…¬é’¥åŠ å¯†è¿‡çš„ temp_eth_address çš„ç§é’¥ï¼Œå³ data

3. temp_eth_address

4. receiverAddress

ä¸Šé¢ 2 ä¸­çš„ data æ— æ³•é€šè¿‡ github ç”¨æˆ·çš„å…¬å¼€ä¿¡æ¯ï¼ˆå…¬é’¥ï¼‰æ±‚å‡º temp_eth_addressï¼Œå› æ­¤æ²¡æœ‰åŠæ³•å»ºç«‹temp_eth_address å’Œ github çš„å…³è”ï¼Œä»è€Œæ— æ³•å»ºç«‹ receiverAddress å’Œ github çš„å…³è”ã€‚

## äººå®¶ç”¨åˆ°äº†å“ªäº›çœgasçš„æ–¹æ¡ˆ

![](./img/6.png)

åˆçº¦ä¸­ä½¿ç”¨ bitmap æ¥å­˜å‚¨ç”¨æˆ·æ˜¯å¦é¢†å–çš„çŠ¶æ€ï¼Œä»¥æ­¤æ¥èŠ‚çœç©ºé—´ã€‚
